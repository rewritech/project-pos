DROP TABLE MENU;
DROP TABLE MENU_OPTION;
DROP TABLE SALE_INFO CASCADE CONSTRAINTS;
DROP TABLE ORDER_INFO;
DROP SEQUENCE SALE_SEQ;
DROP TABLE STORE_INFO;
 
-- 매장 정보 테이블 생성
CREATE TABLE STORE_INFO(
    SERVER_INFO VARCHAR2(50) CONSTRAINT STORE_INFO_SERVER_INFO_PK PRIMARY KEY,
    STORE_ID VARCHAR2(50) CONSTRAINT STORE_INFO_STORE_ID_UK UNIQUE
       CONSTRAINT STORE_INFO_STORE_ID_NN NOT NULL,
    MANAGER_NAME VARCHAR2(50) CONSTRAINT 
       STORE_INFO_MANAGER_NAME_NN NOT NULL);
 
-- 메뉴 테이블 생성
CREATE TABLE MENU(
    TYPE VARCHAR2(50) CONSTRAINT MENU_TYPE_NN NOT NULL, 
    ITEM VARCHAR2(50)  CONSTRAINT MENU_ITEM_UK UNIQUE,
    PRICE NUMBER CONSTRAINT MENU_PRICE_NN NOT NULL);
 
-- 메뉴 옵션 테이블 생성
CREATE TABLE MENU_OPTION(
    TYPE VARCHAR2(50)  CONSTRAINT MENU_OPTION_TYPE_NN  NOT NULL, 
    OPTION_NAME VARCHAR2(50) CONSTRAINT
       MENU_OPTION_OPTION_NAME_NN NOT NULL,
    ADD_COST NUMBER CONSTRAINT MENU_OPTION_ADD_COST_NN NOT NULL);
 
        
-- 판매정보 거래번호(PK)용 시퀀스 생성
CREATE SEQUENCE SALE_SEQ;

-- 판매 정보[간략 거래] 테이블 생성
CREATE TABLE SALE_INFO(
    ORDER_NO NUMBER CONSTRAINT SALE_INFO_ORDER_NO_PK PRIMARY KEY,
    STORE_ID VARCHAR2(50) CONSTRAINT SALE_INFO_STORE_ID_NN NOT NULL
        CONSTRAINT SALE_INFO_STORE_ID_FK
            REFERENCES STORE_INFO(STORE_ID) ON DELETE CASCADE,
    ORDER_TIME VARCHAR2(30) CONSTRAINT SALE_INFO_ORDER_TIME_NN NOT NULL,
    WHOLE_PRICE NUMBER CONSTRAINT SALE_INFO_WHOLE_PRICE_NN NOT NULL,
    CANCEL VARCHAR2(30));

 
-- 주문 정보[상세 거래] 테이블 생성
CREATE TABLE ORDER_INFO(
    ORDER_NO NUMBER CONSTRAINT ORDER_INFO_ORDER_NO_FK  
       REFERENCES SALE_INFO(ORDER_NO) ON DELETE CASCADE
         CONSTRAINT ORDER_INFO_ORDER_NO_NN  NOT NULL,
    ORDER_ITEM VARCHAR2(50) CONSTRAINT ORDER_INFO_ORDER_ITEM_NN NOT NULL,
    ORDER_PRICE NUMBER CONSTRAINT ORDER_INFO_ORDER_PRICE_NN NOT NULL,
    QUANTITY NUMBER CONSTRAINT ORDER_INFO_QUANTITY_NN NOT NULL);

       
-- 기본 메뉴 데이터 입력
INSERT INTO MENU VALUES ('コーヒー', 'アメリカーノ', 400);
INSERT INTO MENU VALUES ('コーヒー', 'カフェラテ', 450);
INSERT INTO MENU VALUES ('コーヒー', 'カフェモカ', 500);
INSERT INTO MENU VALUES ('ケーキ', 'チーズケーキ', 500);
INSERT INTO MENU VALUES ('ケーキ', 'チョコケーキ', 500);
INSERT INTO MENU VALUES ('ケーキ', 'ティラミス', 500);
 
-- 기본 메뉴 옵션 데이터 입력
INSERT INTO MENU_OPTION VALUES ('コーヒー', 'M', 0);
INSERT INTO MENU_OPTION VALUES ('コーヒー', 'L', 500);
INSERT INTO MENU_OPTION VALUES ('ケーキ', 'PIECE', 0);
INSERT INTO MENU_OPTION VALUES ('ケーキ', 'WHOLE', 3300);

-- 기본 매장 정보 입력
INSERT INTO STORE_INFO VALUES ('/10.10.8.21', 'サムソン', 'キム・ヒョンジュ');
INSERT INTO STORE_INFO VALUES ('/10.10.15.217', 'ヒュンダイ', '木野村');
INSERT INTO STORE_INFO VALUES ('/10.10.15.218', 'ヨクサム', '髙橋');
INSERT INTO STORE_INFO VALUES ('/10.10.8.15', 'SCIT', 'イ・ヘイン');

-- 임의의 판매정보 입력(타매장 거래정보 환불 불가 확인용)
--INSERT INTO SALE_INFO VALUES (SALE_SEQ.NEXTVAL, 'SCIT',  '2016/05/22', 100000, '123');

COMMIT;

---- 계약해지 후 재등록용
--INSERT INTO STORE_INFO VALUES ('/10.10.15.216', '삼성', '김형주');
--COMMIT;
--
---- 메뉴정보 변경 후 매장에서 반영 확인용 데이터 갱신
--TRUNCATE TABLE MENU;
--TRUNCATE TABLE MENU_OPTION;
--
--INSERT INTO MENU VALUES ('SHOES', 'NIKE', 10000);
--INSERT INTO MENU VALUES ('SHOES', 'ADIDAS', 9000);
--INSERT INTO MENU VALUES ('SHOES', 'PUMA', 9500);
--INSERT INTO MENU VALUES ('SPORTSWEAR', 'SHIRTS', 6000);
--INSERT INTO MENU VALUES ('SPORTSWEAR', 'PANTS', 8000);
--INSERT INTO MENU VALUES ('SPORTSWEAR', 'OUTER', 11000);
-- 
--INSERT INTO MENU_OPTION VALUES ('SHOES', 'NORMAL', 0);
--INSERT INTO MENU_OPTION VALUES ('SHOES', 'PRIMIER', 10000);
--INSERT INTO MENU_OPTION VALUES ('SPORTSWEAR', 'NORMAL', 0);
--INSERT INTO MENU_OPTION VALUES ('SPORTSWEAR', 'DISCOUT', -2000);
--COMMIT;